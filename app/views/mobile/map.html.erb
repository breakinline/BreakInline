<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/>
    <title>Map</title>
    <%= stylesheet_link_tag session[:context] + '/mobile', :media => 'screen' %>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
  </head>
  <body>
	<div id="map_canvas"></div>
	<div id="closeMap" class="button">
	  <span class="button-text" onclick="window.close()">Close</span>
	</div>
  <script type="text/javascript">
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    var latlng = new google.maps.LatLng(<%=@location.latitude%>, <%=@location.longitude%>);
	var myOptions = {
		  zoom: 15,
		  center: latlng,
		  mapTypeId: google.maps.MapTypeId.ROADMAP
	};
	var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
	map.setCenter(latlng);
	var marker = new google.maps.Marker({
		position: latlng,
		map: map,
		title: '<%=@location.name%>' });
  </script>	
  </body>
</html>
